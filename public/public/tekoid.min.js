!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=17)}([function(t,e,r){"use strict";e.decode=e.parse=r(7),e.encode=e.stringify=r(8)},function(t,e,r){var n;t.exports=(n=n||function(t,e){var r=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),n={},o=n.lib={},i=o.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=o.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,o=t.sigBytes;if(this.clamp(),n%4)for(var i=0;i<o;i++){var s=r[i>>>2]>>>24-i%4*8&255;e[n+i>>>2]|=s<<24-(n+i)%4*8}else for(var i=0;i<o;i+=4)e[n+i>>>2]=r[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r,n=[],o=function(e){var e=e,r=987654321,n=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;return o/=4294967296,(o+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var a=o(4294967296*(r||t.random()));r=987654071*a(),n.push(4294967296*a()|0)}return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new s.init(r,e/2)}},h=a.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new s.init(r,e)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,a=4*i,c=o/a,h=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*i,u=t.min(4*h,o);if(h){for(var l=0;l<h;l+=i)this._doProcessBlock(n,l);var p=n.splice(0,h);r.sigBytes-=u}return new s.init(p,u)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(o.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new p.HMAC.init(t,r).finalize(e)}}}),n.algo={});return n}(Math),n)},function(t,e,r){var n,o=r(6).Buffer,i=r(0),s=r(9),a=r(14);n="function"==typeof o?function(t){return o.from(t).toString("base64")}:window.btoa,t.exports=y;var c={Accept:"application/json, application/x-www-form-urlencoded","Content-Type":"application/x-www-form-urlencoded"},h={invalid_request:["The request is missing a required parameter, includes an","invalid parameter value, includes a parameter more than","once, or is otherwise malformed."].join(" "),invalid_client:["Client authentication failed (e.g., unknown client, no","client authentication included, or unsupported","authentication method)."].join(" "),invalid_grant:["The provided authorization grant (e.g., authorization","code, resource owner credentials) or refresh token is","invalid, expired, revoked, does not match the redirection","URI used in the authorization request, or was issued to","another client."].join(" "),unauthorized_client:["The client is not authorized to request an authorization","code using this method."].join(" "),unsupported_grant_type:["The authorization grant type is not supported by the","authorization server."].join(" "),access_denied:["The resource owner or authorization server denied the request."].join(" "),unsupported_response_type:["The authorization server does not support obtaining","an authorization code using this method."].join(" "),invalid_scope:["The requested scope is invalid, unknown, or malformed."].join(" "),server_error:["The authorization server encountered an unexpected","condition that prevented it from fulfilling the request.","(This error code is needed because a 500 Internal Server","Error HTTP status code cannot be returned to the client","via an HTTP redirect.)"].join(" "),temporarily_unavailable:["The authorization server is currently unable to handle","the request due to a temporary overloading or maintenance","of the server."].join(" ")};function u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(null==t[r])throw new TypeError('Expected "'+r+'" to exist')}}function l(t){var e=h[t.error]||t.error_description||t.error;if(e){var r=new Error(e);return r.body=t,r.code="EAUTH",r}}function p(t){return Array.isArray(t)?t.join(" "):g(t)}function f(t,e){return u(t,"clientId","authorizationUri"),t.authorizationUri+"?"+i.stringify(Object.assign({client_id:t.clientId,redirect_uri:t.redirectUri,scope:p(t.scopes),response_type:e,state:t.state},t.query))}function d(t,e){return"Basic "+n(g(t)+":"+g(e))}function g(t){return null==t?"":String(t)}function m(t,e){return{url:t.url,method:t.method,body:Object.assign({},t.body,e.body),query:Object.assign({},t.query,e.query),headers:Object.assign({},t.headers,e.headers)}}function y(t,e){this.options=t,this.request=e||a,this.code=new T(this),this.token=new b(this),this.owner=new w(this),this.credentials=new _(this),this.jwt=new k(this)}function v(t,e){this.client=t,this.data=e,this.tokenType=e.token_type&&e.token_type.toLowerCase(),this.accessToken=e.access_token,this.refreshToken=e.refresh_token,this.expiresIn(Number(e.expires_in))}function w(t){this.client=t}function b(t){this.client=t}function _(t){this.client=t}function T(t){this.client=t}function k(t){this.client=t}y.Token=v,y.prototype.createToken=function(t,e,r,n){var o=Object.assign({},n,"string"==typeof t?{access_token:t}:t,"string"==typeof e?{refresh_token:e}:e,"string"==typeof r?{token_type:r}:r);return new y.Token(this,o)},y.prototype._request=function(t){var e=t.url,r=i.stringify(t.body),n=i.stringify(t.query);return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),this.request(t.method,e,r,t.headers).then(function(t){var e=function(t){try{return JSON.parse(t)}catch(e){return i.parse(t)}}(t.body),r=l(e);if(r)return Promise.reject(r);if(t.status<200||t.status>=399){var n=new Error("HTTP status "+t.status);return n.status=t.status,n.body=t.body,n.code="ESTATUS",Promise.reject(n)}return e})},v.prototype.expiresIn=function(t){if("number"==typeof t)this.expires=new Date,this.expires.setSeconds(this.expires.getSeconds()+t);else{if(!(t instanceof Date))throw new TypeError("Unknown duration: "+t);this.expires=new Date(t.getTime())}return this.expires},v.prototype.sign=function(t){if(!this.accessToken)throw new Error("Unable to sign without access token");if(t.headers=t.headers||{},"bearer"===this.tokenType)t.headers.Authorization="Bearer "+this.accessToken;else{var e=t.url.split("#"),r="access_token="+this.accessToken,n=e[0].replace(/[?&]access_token=[^&#]/,""),o=e[1]?"#"+e[1]:"";t.url=n+(n.indexOf("?")>-1?"&":"?")+r+o,t.headers.Pragma="no-store",t.headers["Cache-Control"]="no-store"}return t},v.prototype.refresh=function(t){var e=this,r=Object.assign({},this.client.options,t);return this.refreshToken?this.client._request(m({url:r.accessTokenUri,method:"POST",headers:Object.assign({},c,{Authorization:d(r.clientId,r.clientSecret)}),body:{refresh_token:this.refreshToken,grant_type:"refresh_token"}},r)).then(function(t){return e.client.createToken(Object.assign({},e.data,t))}):Promise.reject(new Error("No refresh token"))},v.prototype.expired=function(){return Date.now()>this.expires.getTime()},w.prototype.getToken=function(t,e,r){var n=this,o=Object.assign({},this.client.options,r);return this.client._request(m({url:o.accessTokenUri,method:"POST",headers:Object.assign({},c,{Authorization:d(o.clientId,o.clientSecret)}),body:{scope:p(o.scopes),username:t,password:e,grant_type:"password"}},o)).then(function(t){return n.client.createToken(t)})},b.prototype.getUri=function(t){return f(Object.assign({},this.client.options,t),"token")},b.prototype.getToken=function(t,e){var r=Object.assign({},this.client.options,e),n="object"==typeof t?t:s.parse(t,!0),o=s.parse(r.redirectUri);if("string"==typeof n.pathname&&n.pathname!==o.pathname)return Promise.reject(new TypeError("Redirected path should match configured path, but got: "+n.pathname));if(!n.hash&&!n.search)return Promise.reject(new TypeError("Unable to process uri: "+t));var a=Object.assign({},"string"==typeof n.query?i.parse(n.query):n.query||{},"string"==typeof n.hash?i.parse(n.hash.substr(1)):n.hash||{}),c=l(a);return c?Promise.reject(c):null!=r.state&&a.state!==r.state?Promise.reject(new TypeError("Invalid state: "+a.state)):Promise.resolve(this.client.createToken(a))},_.prototype.getToken=function(t){var e=this,r=Object.assign({},this.client.options,t);return u(r,"clientId","clientSecret","accessTokenUri"),this.client._request(m({url:r.accessTokenUri,method:"POST",headers:Object.assign({},c,{Authorization:d(r.clientId,r.clientSecret)}),body:{scope:p(r.scopes),grant_type:"client_credentials"}},r)).then(function(t){return e.client.createToken(t)})},T.prototype.getUri=function(t){return f(Object.assign({},this.client.options,t),"code")},T.prototype.getToken=function(t,e){var r=this,n=Object.assign({},this.client.options,e);u(n,"clientId","accessTokenUri");var o="object"==typeof t?t:s.parse(t,!0);if("string"==typeof n.redirectUri&&"string"==typeof o.pathname&&o.pathname!==s.parse(n.redirectUri).pathname)return Promise.reject(new TypeError("Redirected path should match configured path, but got: "+o.pathname));if(!o.query)return Promise.reject(new TypeError("Unable to process uri: "+t));var a="string"==typeof o.query?i.parse(o.query):o.query||{},h=l(a);if(h)return Promise.reject(h);if(null!=n.state&&a.state!==n.state)return Promise.reject(new TypeError("Invalid state: "+a.state));if(!a.code)return Promise.reject(new TypeError("Missing code, unable to request token"));var p=Object.assign({},c),f={code:a.code,grant_type:"authorization_code",redirect_uri:n.redirectUri};return n.clientSecret?p.Authorization=d(n.clientId,n.clientSecret):f.client_id=n.clientId,this.client._request(m({url:n.accessTokenUri,method:"POST",headers:p,body:f},n)).then(function(t){return r.client.createToken(t)})},k.prototype.getToken=function(t,e){var r=this,n=Object.assign({},this.client.options,e),o=Object.assign({},c);return u(n,"accessTokenUri"),n.clientId&&(o.Authorization=d(n.clientId,n.clientSecret)),this.client._request(m({url:n.accessTokenUri,method:"POST",headers:o,body:{scope:p(n.scopes),grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:t}},n)).then(function(t){return r.client.createToken(t)})}},function(t,e,r){"use strict";var n=r(15);function o(t){this.message=t}o.prototype=new Error,o.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new o("Invalid token specified");var r=!0===(e=e||{}).header?0:1;try{return JSON.parse(n(t.split(".")[r]))}catch(t){throw new o("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=o},function(t,e,r){var n;t.exports=(n=r(1),function(t){var e=n,r=e.lib,o=r.WordArray,i=r.Hasher,s=e.algo,a=[],c=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,o=0;o<64;)e(n)&&(o<8&&(a[o]=r(t.pow(n,.5))),c[o]=r(t.pow(n,1/3)),o++),n++}();var h=[],u=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],s=r[3],a=r[4],u=r[5],l=r[6],p=r[7],f=0;f<64;f++){if(f<16)h[f]=0|t[e+f];else{var d=h[f-15],g=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,m=h[f-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;h[f]=g+h[f-7]+y+h[f-16]}var v=n&o^n&i^o&i,w=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=p+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&l)+c[f]+h[f];p=l,l=u,u=a,a=s+b|0,s=i,i=o,o=n,n=b+(w+v)|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+l|0,r[7]=r[7]+p|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return r[o>>>5]|=128<<24-o%32,r[14+(o+64>>>9<<4)]=t.floor(n/4294967296),r[15+(o+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(u),e.HmacSHA256=i._createHmacHelper(u)}(Math),n.SHA256)},function(t,e,r){var n,o,i;t.exports=(n=r(1),i=(o=n).lib.WordArray,o.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var o=[],i=0;i<r;i+=3)for(var s=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)o.push(n.charAt(s>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var e=t.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var o=0;o<r.length;o++)n[r.charCodeAt(o)]=o}var s=r.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return function(t,e,r){for(var n=[],o=0,s=0;s<e;s++)if(s%4){var a=r[t.charCodeAt(s-1)]<<s%4*2,c=r[t.charCodeAt(s)]>>>6-s%4*2;n[o>>>2]|=(a|c)<<24-o%4*8,o++}return i.create(n,o)}(t,e,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)},function(t,e){},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var h=t.length;c>0&&h>c&&(h=c);for(var u=0;u<h;++u){var l,p,f,d,g=t[u].replace(a,"%20"),m=g.indexOf(r);m>=0?(l=g.substr(0,m),p=g.substr(m+1)):(l=g,p=""),f=decodeURIComponent(l),d=decodeURIComponent(p),n(s,f)?o(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?i(s(t),function(s){var a=encodeURIComponent(n(s))+r;return o(t[s])?i(t[s],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[s]))}).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";var n=r(10),o=r(13);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){o.isString(t)&&(t=w(t));return t instanceof i?t.format():i.prototype.format.call(t)},e.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(h),l=["%","/","?",";","#"].concat(u),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(0);function w(t,e,r){if(t&&o.isObject(t)&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}i.prototype.parse=function(t,e,r){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),a=-1!==i&&i<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var w=t=h.join(a);if(w=w.trim(),!r&&1===t.split("#").length){var b=c.exec(w);if(b)return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=s.exec(w);if(_){var T=(_=_[0]).toLowerCase();this.protocol=T,w=w.substr(_.length)}if(r||_||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===w.substr(0,2);!k||_&&m[_]||(w=w.substr(2),this.slashes=!0)}if(!m[_]&&(k||_&&!y[_])){for(var j,O,x=-1,I=0;I<p.length;I++){-1!==(A=w.indexOf(p[I]))&&(-1===x||A<x)&&(x=A)}-1!==(O=-1===x?w.lastIndexOf("@"):w.lastIndexOf("@",x))&&(j=w.slice(0,O),w=w.slice(O+1),this.auth=decodeURIComponent(j)),x=-1;for(I=0;I<l.length;I++){var A;-1!==(A=w.indexOf(l[I]))&&(-1===x||A<x)&&(x=A)}-1===x&&(x=w.length),this.host=w.slice(0,x),w=w.slice(x),this.parseHost(),this.hostname=this.hostname||"";var S="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!S)for(var U=this.hostname.split(/\./),q=(I=0,U.length);I<q;I++){var C=U[I];if(C&&!C.match(f)){for(var E="",P=0,z=C.length;P<z;P++)C.charCodeAt(P)>127?E+="x":E+=C[P];if(!E.match(f)){var R=U.slice(0,I),B=U.slice(I+1),H=C.match(d);H&&(R.push(H[1]),B.unshift(H[2])),B.length&&(w="/"+B.join(".")+w),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=n.toASCII(this.hostname));var M=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+M,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!g[T])for(I=0,q=u.length;I<q;I++){var N=u[I];if(-1!==w.indexOf(N)){var F=encodeURIComponent(N);F===N&&(F=escape(N)),w=w.split(N).join(F)}}var L=w.indexOf("#");-1!==L&&(this.hash=w.substr(L),w=w.slice(0,L));var K=w.indexOf("?");if(-1!==K?(this.search=w.substr(K),this.query=w.substr(K+1),e&&(this.query=v.parse(this.query)),w=w.slice(0,K)):e&&(this.search="",this.query={}),w&&(this.pathname=w),y[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var $=this.search||"";this.path=M+$}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},i.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(o.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),h=0;h<c.length;h++){var u=c[h];"protocol"!==u&&(r[u]=t[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!y[t.protocol]){for(var l=Object.keys(t),p=0;p<l.length;p++){var f=l[p];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||m[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var w=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=b||w||r.host&&t.pathname,T=_,k=r.pathname&&r.pathname.split("/")||[],j=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(j&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===k[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),r.search=t.search,r.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(j)r.hostname=r.host=k.shift(),(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift());return r.search=t.search,r.query=t.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=k.slice(-1)[0],x=(r.host||t.host||k.length>1)&&("."===O||".."===O)||""===O,I=0,A=k.length;A>=0;A--)"."===(O=k[A])?k.splice(A,1):".."===O?(k.splice(A,1),I++):I&&(k.splice(A,1),I--);if(!_&&!T)for(;I--;I)k.unshift("..");!_||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),x&&"/"!==k.join("/").substr(-1)&&k.push("");var S,U=""===k[0]||k[0]&&"/"===k[0].charAt(0);j&&(r.hostname=r.host=U?"":k.length?k.shift():"",(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift()));return(_=_||r.host&&k.length)&&!U&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){(function(t,n){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,c=2147483647,h=36,u=1,l=26,p=38,f=700,d=72,g=128,m="-",y=/^xn--/,v=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=h-u,T=Math.floor,k=String.fromCharCode;function j(t){throw new RangeError(b[t])}function O(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function x(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+O((t=t.replace(w,".")).split("."),e).join(".")}function I(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function A(t){return O(t,function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function S(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function U(t,e,r){var n=0;for(t=r?T(t/f):t>>1,t+=T(t/e);t>_*l>>1;n+=h)t=T(t/_);return T(n+(_+1)*t/(t+p))}function q(t){var e,r,n,o,i,s,a,p,f,y,v,w=[],b=t.length,_=0,k=g,O=d;for((r=t.lastIndexOf(m))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&j("not-basic"),w.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<b;){for(i=_,s=1,a=h;o>=b&&j("invalid-input"),((p=(v=t.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:h)>=h||p>T((c-_)/s))&&j("overflow"),_+=p*s,!(p<(f=a<=O?u:a>=O+l?l:a-O));a+=h)s>T(c/(y=h-f))&&j("overflow"),s*=y;O=U(_-i,e=w.length+1,0==i),T(_/e)>c-k&&j("overflow"),k+=T(_/e),_%=e,w.splice(_++,0,k)}return A(w)}function C(t){var e,r,n,o,i,s,a,p,f,y,v,w,b,_,O,x=[];for(w=(t=I(t)).length,e=g,r=0,i=d,s=0;s<w;++s)(v=t[s])<128&&x.push(k(v));for(n=o=x.length,o&&x.push(m);n<w;){for(a=c,s=0;s<w;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>T((c-r)/(b=n+1))&&j("overflow"),r+=(a-e)*b,e=a,s=0;s<w;++s)if((v=t[s])<e&&++r>c&&j("overflow"),v==e){for(p=r,f=h;!(p<(y=f<=i?u:f>=i+l?l:f-i));f+=h)O=p-y,_=h-y,x.push(k(S(y+O%_,0))),p=T(O/_);x.push(k(S(p,0))),i=U(r,b,n==o),r=0,++n}++r,++e}return x.join("")}a={version:"1.4.1",ucs2:{decode:I,encode:A},decode:q,encode:C,toASCII:function(t){return x(t,function(t){return v.test(t)?"xn--"+C(t):t})},toUnicode:function(t){return x(t,function(t){return y.test(t)?q(t.slice(4).toLowerCase()):t})}},void 0===(o=function(){return a}.call(e,r,e,t))||(t.exports=o)}()}).call(this,r(11)(t),r(12))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t,e,r,n){return new Promise(function(o,i){var s=new window.XMLHttpRequest;s.open(t,e),s.onload=function(){return o({status:s.status,body:s.responseText})},s.onerror=s.onabort=function(){return i(new Error(s.statusText||"XHR aborted: "+e))},Object.keys(n).forEach(function(t){s.setRequestHeader(t,n[t])}),s.send(r)})}},function(t,e,r){var n=r(16);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(n(t).replace(/(.)/g,function(t,e){var r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(e)}catch(t){return n(e)}}},function(t,e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){this.message=t}n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,a=0,c="";i=e.charAt(a++);~i&&(o=s%4?64*o+i:i,s++%4)?c+=String.fromCharCode(255&o>>(-2*s&6)):0)i=r.indexOf(i);return c}},function(t,e,r){"use strict";r.r(e);var n=r(2),o=r.n(n),i=r(3),s=r.n(i),a=r(4),c=r.n(a),h=r(5),u=r.n(h);const l=(t=50)=>{let e="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},p=t=>u.a.stringify(c()(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),f={setItem:(t,e,r=1)=>{const n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3);const o="expires="+n.toUTCString();document.cookie=t+"="+e+";"+o+";path=/"},getItem:t=>{const e=t+"=",r=decodeURIComponent(document.cookie).split(";");for(let t=0;t<r.length;t++){let n=r[t];for(;" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return""}};r.d(e,"TEKOID_AUTHORIZATION_URI",function(){return d}),r.d(e,"TEKOID_TOKEN_URI",function(){return g}),r.d(e,"COOKIE_STATE_NAME",function(){return m}),r.d(e,"COOKIE_CODE_VERIFIER_NAME",function(){return y}),r.d(e,"TekoID",function(){return v});const d="https://id.teko.vn/oauth/authorize",g="https://id.teko.vn/oauth/token",m="teko-oauth-state",y="teko-oauth-code-verifier";class v{constructor(t={}){const{clientId:e,redirectUri:r=window.location.href,scopes:n=[]}=t;if(!e)throw new Error("Missing required field: clientId");this._clientId=e,this._redirectUri=r,this._scopes=n,this._tekoIdAuth=new o.a({clientId:e,authorizationUri:d,accessTokenUri:g,redirectUri:r,scopes:n,state:f.getItem(m)||null}),this._accessToken=null,this._idToken=null,this._expires=null,this._accessTokenScopes=[]}isLoggedIn(){return!!this._accessToken&&(!!this._expires&&!(new Date>=this._expires))}login(){const t=this._getAuthUri();window.location.href=t}logout(){this._accessToken=null}getUserInfo(){if(!this.isLoggedIn())throw new Error("User has not logged in yet");if(!this._scopes.includes("openid"))throw new Error("Should register openid scope in order to access user info");return s()(this._idToken)}getUserScopes(){return this._accessTokenScopes}getAccessToken(){return this._accessToken}_getAuthUri(){const t=l(),e=l();f.setItem(m,t),f.setItem(y,e);const r=p(e);return this._tekoIdAuth.code.getUri({query:{code_challenge:r,code_challenge_method:"S256",state:t}})}_exchangeCode(t){return this._tekoIdAuth.code.getToken(t,{body:{code_verifier:f.getItem(y)}}).then(t=>{this._accessToken=t.accessToken,this._idToken=t.data.id_token,this._expires=t.expires,this._accessTokenScopes=t.data.scopes}).finally(()=>{window.history.pushState(null,document.title,this._redirectUri)})}}window.TekoID={user:null,init:t=>{const e=new v(t);window.TekoID.user=e;const r=window.location.search;return r.includes("code")&&r.includes("state")?e._exchangeCode(window.location.href):Promise.resolve()}}}]);